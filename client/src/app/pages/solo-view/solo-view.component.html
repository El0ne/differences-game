<body class="page-background" *ngIf="this.imagesInfo">
    <div class="nav-bar">
        <div class="options" *ngIf="showNavBar">
            <button class="normal-button home-button option-buttons" type="button" routerLink="/home">
                <mat-icon class="icon">home</mat-icon>
            </button>
            <button class="normal-button option-buttons" type="button" (click)="openInfoModal()">
                <mat-icon class="icon">info</mat-icon>
            </button>
        </div>
        <div class="info-option" *ngIf="showNavBar">
            <button class="normal-button option-buttons" type="button" (click)="quitGame()">
                <mat-icon class="icon">logout</mat-icon>
            </button>
        </div>
    </div>

    <div class="flex-game">
        <div class="image-container neon-border">
            <app-click-event #left [id]="1" [original]="'original'" [gameCardId]="this.stageId"
                [imagePath]="this.imagesInfo.originalImageName" (differenceDetected)="differenceHandler($event)"
                (mistake)="handleMistake()" (cheatModeHandler)="resetDifferences($event)">
            </app-click-event>
        </div>
        <div class="game-options">
            <div id="double-score">
                <div class="score">
                    <div class="player-name-container">
                        <div class="playerName">{{ player }}</div>
                    </div>
                    <!-- référence : https://codepen.io/Vivekp1118/pen/YzLOOVG -->
                    <div class="container neon-border">
                        <div class="row">
                            <div class="col col-heading neon">
                                <div class="playerName">SCORE</div>
                            </div>
                            <div class="col col-display" id="scoreHome">{{ currentScorePlayer }}</div>
                        </div>
                    </div>
                </div>
                <div class="score" *ngIf="isMultiplayer">
                    <div class="player-name-container">
                        <div class="playerName">{{ opponent }}</div>
                    </div>
                    <!-- référence : https://codepen.io/Vivekp1118/pen/YzLOOVG -->
                    <div class="container neon-border">
                        <div class="row">
                            <div class="col col-heading neon">
                                <div class="playerName">SCORE</div>
                            </div>
                            <div class="col col-display" id="scoreHome">{{ currentScoreOpponent }}</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="timer">
                <div class="timer-box">
                    <div class="display">
                        <div id="time">{{ timesConversion() }}</div>
                    </div>
                </div>
            </div>

            <div class="text-box neon-border">
                <div class="text-area" #scroll [scrollTop]="scroll.scrollHeight">
                    <div class="text-container" *ngFor="let data of messages">
                        <div *ngIf="data.event === 'message'"
                            [ngClass]="data.socketId === socketService.socketId ? 'player1 message' : 'player2 message'">
                            {{ data.message }}
                        </div>
                        <div *ngIf="data.event === 'event'" class="error message">
                            {{ data.message }} {{ isMultiplayer && data.socketId === socketService.socketId ? player :
                            opponent }}
                        </div>
                        <div *ngIf="data.event === 'notification'" class="error message">
                            {{ data.message }}
                        </div>
                    </div>
                </div>
                <div class="answer-area" *ngIf="isMultiplayer">
                    <input type="text" (keydown.enter)="sendMessage()" class="input-field"
                        placeholder="Entrez votre message" [(ngModel)]="messageContent" (click)="removeCheatMode()"
                        (blur)="addCheatMode()" />
                    <button class="send-button" (click)="sendMessage()"><mat-icon>send</mat-icon></button>
                </div>
            </div>
        </div>

        <div class="image-container neon-border">
            <app-click-event #right [id]="2" [original]="'different'" [gameCardId]="this.stageId"
                [imagePath]="this.imagesInfo.differenceImageName" (differenceDetected)="differenceHandler($event)"
                (mistake)="handleMistake()" (cheatModeHandler)="resetDifferences($event)">
            </app-click-event>
        </div>
        <div class="hint-button">
            <button class="hint" type="button">
                <mat-icon class="hint-button">search</mat-icon>
            </button>
        </div>
    </div>
</body>